<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.6) on Wed Jan 29 12:56:42 UYT 2020 -->
<title>SqlGraphStore (nzilbb.labbcat.server)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2020-01-29">
<link rel="stylesheet" type="text/css" href="../../../../style.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SqlGraphStore (nzilbb.labbcat.server)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10,"i34":10,"i35":10,"i36":10,"i37":10,"i38":10,"i39":10,"i40":10,"i41":10,"i42":10,"i43":10,"i44":10,"i45":10,"i46":10,"i47":10,"i48":10,"i49":10,"i50":10,"i51":10,"i52":10,"i53":10,"i54":10,"i55":10,"i56":10,"i57":10,"i58":10,"i59":10,"i60":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">nzilbb.labbcat.server.db</a></div>
<h2 title="Class SqlGraphStore" class="title">Class SqlGraphStore</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>Object</li>
<li>
<ul class="inheritance">
<li>SqlGraphStore</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><code>IGraphStore</code>, <code>IGraphStoreQuery</code></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="SqlGraphStoreAdministration.html" title="class in nzilbb.labbcat.server.db">SqlGraphStoreAdministration</a></code></dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">SqlGraphStore</span>
extends Object
implements IGraphStore</pre>
<div class="block">Graph store that uses a relational database as its back end.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Robert Fromont robert@fromont.net.nz</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E()">SqlGraphStore</a></span>()</code></th>
<td class="colLast">
<div class="block">Default constructor.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.lang.String,java.io.File,java.lang.String,java.lang.String,java.lang.String,java.lang.String)">SqlGraphStore</a></span>&#8203;(String&nbsp;baseUrl,
             File&nbsp;files,
             String&nbsp;connectString,
             String&nbsp;databaseUser,
             String&nbsp;password,
             String&nbsp;storeUser)</code></th>
<td class="colLast">
<div class="block">Constructor with connection parameters.</div>
</td>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.lang.String,java.io.File,java.sql.Connection,java.lang.String)">SqlGraphStore</a></span>&#8203;(String&nbsp;baseUrl,
             File&nbsp;files,
             Connection&nbsp;connection,
             String&nbsp;user)</code></th>
<td class="colLast">
<div class="block">Constructor with connection.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(java.lang.String,java.sql.Connection,java.lang.String)">SqlGraphStore</a></span>&#8203;(String&nbsp;baseUrl,
             Connection&nbsp;connection,
             String&nbsp;user)</code></th>
<td class="colLast">
<div class="block">Constructor with connection.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#countAnnotations(java.lang.String,java.lang.String)">countAnnotations</a></span>&#8203;(String&nbsp;id,
                String&nbsp;layerId)</code></th>
<td class="colLast">
<div class="block">Gets the number of annotations on the given layer of the given graph.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#countMatchingAnnotations(java.lang.String)">countMatchingAnnotations</a></span>&#8203;(String&nbsp;expression)</code></th>
<td class="colLast">
<div class="block">Counts the number of annotations that match a particular pattern.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#countMatchingGraphIds(java.lang.String)">countMatchingGraphIds</a></span>&#8203;(String&nbsp;expression)</code></th>
<td class="colLast">
<div class="block">Counts the number of graphs that match a particular pattern.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#countMatchingParticipantIds(java.lang.String)">countMatchingParticipantIds</a></span>&#8203;(String&nbsp;expression)</code></th>
<td class="colLast">
<div class="block">Counts the number of participants that match a particular pattern.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#createAnnotation(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.Integer,java.lang.String)">createAnnotation</a></span>&#8203;(String&nbsp;id,
                String&nbsp;fromId,
                String&nbsp;toId,
                String&nbsp;layerId,
                String&nbsp;label,
                Integer&nbsp;confidence,
                String&nbsp;parentId)</code></th>
<td class="colLast">
<div class="block">Creates an annotation starting at <var>fromId</var> and ending at <var>toId</var>.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deleteGraph(java.lang.String)">deleteGraph</a></span>&#8203;(String&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Deletes the given graph, and all associated files.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#destroyAnnotation(java.lang.String,java.lang.String)">destroyAnnotation</a></span>&#8203;(String&nbsp;id,
                 String&nbsp;annotationId)</code></th>
<td class="colLast">
<div class="block">Destroys the annotation with the given ID.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#finalize()">finalize</a></span>()</code></th>
<td class="colLast">
<div class="block">Called when the object is garbage-collected.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#generateMissingMedia(java.lang.String)">generateMissingMedia</a></span>&#8203;(String&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Generates any media files that are not marked "on demand" and for which there are
 available conversions.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>Anchor[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAnchors(java.lang.String,java.lang.String%5B%5D)">getAnchors</a></span>&#8203;(String&nbsp;id,
          String[]&nbsp;anchorIds)</code></th>
<td class="colLast">
<div class="block">Gets the given anchors in the given graph.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>Annotation[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAnnotations(java.lang.String,java.lang.String)">getAnnotations</a></span>&#8203;(String&nbsp;id,
              String&nbsp;layerId)</code></th>
<td class="colLast">
<div class="block">Gets the annotations on the given layer of the given graph.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>Annotation[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAnnotations(java.lang.String,java.lang.String,java.lang.Integer,java.lang.Integer)">getAnnotations</a></span>&#8203;(String&nbsp;id,
              String&nbsp;layerId,
              Integer&nbsp;pageLength,
              Integer&nbsp;pageNumber)</code></th>
<td class="colLast">
<div class="block">Gets the annotations on the given layer of the given graph.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>MediaFile[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getAvailableMedia(java.lang.String)">getAvailableMedia</a></span>&#8203;(String&nbsp;id)</code></th>
<td class="colLast">
<div class="block">List the media available for the given graph.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getBaseUrl()">getBaseUrl</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#baseUrl"><code>baseUrl</code></a>: URL prefix for file access.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>Connection</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getConnection()">getConnection</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#connection"><code>connection</code></a>: Database connection.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>String[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCorpusIds()">getCorpusIds</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets a list of corpus IDs.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getDisconnectWhenFinished()">getDisconnectWhenFinished</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#disconnectWhenFinished"><code>disconnectWhenFinished</code></a>: Whether to disconnect the connection
 when garbage collected.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>MediaFile[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getEpisodeDocuments(java.lang.String)">getEpisodeDocuments</a></span>&#8203;(String&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Get a list of documents associated with the episode of the given graph.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>File</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFiles()">getFiles</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#files"><code>files</code></a>: Root directory for file structure.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>Graph</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFragment(java.lang.String,double,double,java.lang.String%5B%5D)">getFragment</a></span>&#8203;(String&nbsp;graphId,
           double&nbsp;start,
           double&nbsp;end,
           String[]&nbsp;layerIds)</code></th>
<td class="colLast">
<div class="block">Gets a fragment of a graph, given its ID and the start/end offsets that define the 
 desired fragment, and containing only the given layers.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>Graph</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFragment(java.lang.String,java.lang.String)">getFragment</a></span>&#8203;(String&nbsp;graphId,
           String&nbsp;annotationId)</code></th>
<td class="colLast">
<div class="block">Gets a fragment of a graph, given its ID and the ID of an annotation in it that defines the 
 desired fragment.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>Graph</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFragment(java.lang.String,java.lang.String,java.lang.String%5B%5D)">getFragment</a></span>&#8203;(String&nbsp;graphId,
           String&nbsp;annotationId,
           String[]&nbsp;layerIds)</code></th>
<td class="colLast">
<div class="block">Gets a fragment of a graph, given its ID and the ID of an annotation in it that defines the 
 desired fragment, and containing only the given layers.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>MonitorableSeries&lt;Graph&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getFragmentSeries(java.lang.String,java.lang.String%5B%5D)">getFragmentSeries</a></span>&#8203;(String&nbsp;seriesId,
                 String[]&nbsp;layerIds)</code></th>
<td class="colLast">
<div class="block">Gets a series of fragments, given the series' ID, and only the given layers.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>Graph</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getGraph(java.lang.String)">getGraph</a></span>&#8203;(String&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Gets a graph given its ID.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>Graph</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getGraph(java.lang.String,java.lang.String%5B%5D)">getGraph</a></span>&#8203;(String&nbsp;id,
        String[]&nbsp;layerIds)</code></th>
<td class="colLast">
<div class="block">Gets a graph given its ID, containing only the given layers.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>String[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getGraphIds()">getGraphIds</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets a list of graph IDs.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>String[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getGraphIdsInCorpus(java.lang.String)">getGraphIdsInCorpus</a></span>&#8203;(String&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Gets a list of graph IDs in the given corpus.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>String[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getGraphIdsWithParticipant(java.lang.String)">getGraphIdsWithParticipant</a></span>&#8203;(String&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Gets a list of IDs of graphs that include the given participant.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getId()">getId</a></span>()</code></th>
<td class="colLast">
<div class="block">IGraphStore method and getter for <a href="#id"><code>id</code></a>: The store's ID.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>Layer</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLayer(java.lang.String)">getLayer</a></span>&#8203;(String&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Gets a layer definition.</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>String[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLayerIds()">getLayerIds</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets a list of layer IDs (annotation 'types').</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>Layer[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLayers()">getLayers</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets a list of layer definitions.</div>
</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMatchAnnotations(java.util.Iterator,java.lang.String%5B%5D,int,int,java.util.function.Consumer)">getMatchAnnotations</a></span>&#8203;(Iterator&lt;String&gt;&nbsp;matchIds,
                   String[]&nbsp;layerIds,
                   int&nbsp;targetOffset,
                   int&nbsp;annotationsPerLayer,
                   Consumer&lt;Annotation[]&gt;&nbsp;consumer)</code></th>
<td class="colLast">
<div class="block">Gets the annotations on given layers for a set of match IDs.</div>
</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>Annotation[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMatchingAnnotations(java.lang.String,java.lang.Integer,java.lang.Integer)">getMatchingAnnotations</a></span>&#8203;(String&nbsp;expression,
                      Integer&nbsp;pageLength,
                      Integer&nbsp;pageNumber)</code></th>
<td class="colLast">
<div class="block">Gets a list of annotations that match a particular pattern.</div>
</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>String[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMatchingGraphIds(java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String)">getMatchingGraphIds</a></span>&#8203;(String&nbsp;expression,
                   Integer&nbsp;pageLength,
                   Integer&nbsp;pageNumber,
                   String&nbsp;order)</code></th>
<td class="colLast">
<div class="block">Gets a list of IDs of graphs that match a particular pattern.</div>
</td>
</tr>
<tr id="i35" class="rowColor">
<td class="colFirst"><code>String[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMatchingParticipantIds(java.lang.String)">getMatchingParticipantIds</a></span>&#8203;(String&nbsp;expression)</code></th>
<td class="colLast">
<div class="block">Gets a list of IDs of participants that match a particular pattern.</div>
</td>
</tr>
<tr id="i36" class="altColor">
<td class="colFirst"><code>String[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMatchingParticipantIds(java.lang.String,java.lang.Integer,java.lang.Integer)">getMatchingParticipantIds</a></span>&#8203;(String&nbsp;expression,
                         Integer&nbsp;pageLength,
                         Integer&nbsp;pageNumber)</code></th>
<td class="colLast">
<div class="block">Gets a list of IDs of participants that match a particular pattern.</div>
</td>
</tr>
<tr id="i37" class="rowColor">
<td class="colFirst"><code>String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMedia(java.lang.String,java.lang.String,java.lang.String)">getMedia</a></span>&#8203;(String&nbsp;id,
        String&nbsp;trackSuffix,
        String&nbsp;mimeType)</code></th>
<td class="colLast">
<div class="block">Gets a given media track for a given graph.</div>
</td>
</tr>
<tr id="i38" class="altColor">
<td class="colFirst"><code>String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMedia(java.lang.String,java.lang.String,java.lang.String,java.lang.Double,java.lang.Double)">getMedia</a></span>&#8203;(String&nbsp;id,
        String&nbsp;trackSuffix,
        String&nbsp;mimeType,
        Double&nbsp;startOffset,
        Double&nbsp;endOffset)</code></th>
<td class="colLast">
<div class="block">Gets a given media track for a given graph.</div>
</td>
</tr>
<tr id="i39" class="rowColor">
<td class="colFirst"><code>MediaTrackDefinition[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getMediaTracks()">getMediaTracks</a></span>()</code></th>
<td class="colLast">
<div class="block">List the predefined media tracks available for transcripts.</div>
</td>
</tr>
<tr id="i40" class="altColor">
<td class="colFirst"><code>Annotation</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getParticipant(java.lang.String)">getParticipant</a></span>&#8203;(String&nbsp;id)</code></th>
<td class="colLast">
<div class="block">Gets the participant record specified by the given identifier.</div>
</td>
</tr>
<tr id="i41" class="rowColor">
<td class="colFirst"><code>String[]</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getParticipantIds()">getParticipantIds</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets a list of participant IDs.</div>
</td>
</tr>
<tr id="i42" class="altColor">
<td class="colFirst"><code>Schema</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSchema()">getSchema</a></span>()</code></th>
<td class="colLast">
<div class="block">Gets the layer schema.</div>
</td>
</tr>
<tr id="i43" class="rowColor">
<td class="colFirst"><code>String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getSystemAttribute(java.lang.String)">getSystemAttribute</a></span>&#8203;(String&nbsp;name)</code></th>
<td class="colLast">
<div class="block">Gets the value of a system attribute.</div>
</td>
</tr>
<tr id="i44" class="altColor">
<td class="colFirst"><code>String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getUser()">getUser</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#user"><code>user</code></a>: ID of the user querying the store.</div>
</td>
</tr>
<tr id="i45" class="rowColor">
<td class="colFirst"><code>HashSet&lt;String&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getUserRoles()">getUserRoles</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for <a href="#userRoles"><code>userRoles</code></a>: Roles the user fulfills.</div>
</td>
</tr>
<tr id="i46" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#saveEpisodeAnnotationChanges(nzilbb.ag.Annotation,java.sql.PreparedStatement)">saveEpisodeAnnotationChanges</a></span>&#8203;(Annotation&nbsp;annotation,
                            PreparedStatement&nbsp;sqlLastId)</code></th>
<td class="colLast">
<div class="block">Save changes to an episode tag annotation.</div>
</td>
</tr>
<tr id="i47" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#saveEpisodeDocument(java.lang.String,java.lang.String)">saveEpisodeDocument</a></span>&#8203;(String&nbsp;id,
                   String&nbsp;url)</code></th>
<td class="colLast">
<div class="block">Saves the given document for the episode of the given graph.</div>
</td>
</tr>
<tr id="i48" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#saveGraph(nzilbb.ag.Graph)">saveGraph</a></span>&#8203;(Graph&nbsp;graph)</code></th>
<td class="colLast">
<div class="block">Saves the given graph.</div>
</td>
</tr>
<tr id="i49" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#saveMedia(java.lang.String,java.lang.String,java.lang.String)">saveMedia</a></span>&#8203;(String&nbsp;id,
         String&nbsp;trackSuffix,
         String&nbsp;mediaUrl)</code></th>
<td class="colLast">
<div class="block">Saves the given media for the given graph.</div>
</td>
</tr>
<tr id="i50" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#saveParticipant(nzilbb.ag.Annotation)">saveParticipant</a></span>&#8203;(Annotation&nbsp;participant)</code></th>
<td class="colLast">
<div class="block">Saves a participant, and all its tags, to the database.</div>
</td>
</tr>
<tr id="i51" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#saveParticipantAttributeChanges(nzilbb.ag.Annotation,java.sql.PreparedStatement,java.sql.PreparedStatement,java.sql.PreparedStatement,java.sql.PreparedStatement)">saveParticipantAttributeChanges</a></span>&#8203;(Annotation&nbsp;annotation,
                               PreparedStatement&nbsp;sqlInsertParticipantAttribute,
                               PreparedStatement&nbsp;sqlUpdateParticipantAttribute,
                               PreparedStatement&nbsp;sqlDeleteParticipantAttribute,
                               PreparedStatement&nbsp;sqlDeleteAllParticipantAttributesOnLayer)</code></th>
<td class="colLast">
<div class="block">Saves changes to a transcript attribute annotation.</div>
</td>
</tr>
<tr id="i52" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#saveSource(java.lang.String,java.lang.String)">saveSource</a></span>&#8203;(String&nbsp;id,
          String&nbsp;url)</code></th>
<td class="colLast">
<div class="block">Saves the given source file (transcript) for the given graph</div>
</td>
</tr>
<tr id="i53" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#saveSpecialAnnotationChanges(nzilbb.ag.Annotation,java.util.HashMap)">saveSpecialAnnotationChanges</a></span>&#8203;(Annotation&nbsp;annotation,
                            HashMap&lt;String,&#8203;String&gt;&nbsp;participantNameToNumber)</code></th>
<td class="colLast">
<div class="block">Save changes to a 'special' annotation, e.g.</div>
</td>
</tr>
<tr id="i54" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#saveTranscriptAttributeChanges(nzilbb.ag.Annotation,java.sql.PreparedStatement,java.sql.PreparedStatement,java.sql.PreparedStatement)">saveTranscriptAttributeChanges</a></span>&#8203;(Annotation&nbsp;annotation,
                              PreparedStatement&nbsp;sqlInsertTranscriptAttribute,
                              PreparedStatement&nbsp;sqlUpdateTranscriptAttribute,
                              PreparedStatement&nbsp;sqlDeleteTranscriptAttribute)</code></th>
<td class="colLast">
<div class="block">Saves changes to a transcript attribute annotation.</div>
</td>
</tr>
<tr id="i55" class="rowColor">
<td class="colFirst"><code><a href="SqlGraphStore.html" title="class in nzilbb.labbcat.server.db">SqlGraphStore</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setBaseUrl(java.lang.String)">setBaseUrl</a></span>&#8203;(String&nbsp;newBaseUrl)</code></th>
<td class="colLast">
<div class="block">Setter for <a href="#baseUrl"><code>baseUrl</code></a>: URL prefix for file access.</div>
</td>
</tr>
<tr id="i56" class="altColor">
<td class="colFirst"><code><a href="SqlGraphStore.html" title="class in nzilbb.labbcat.server.db">SqlGraphStore</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setConnection(java.sql.Connection)">setConnection</a></span>&#8203;(Connection&nbsp;newConnection)</code></th>
<td class="colLast">
<div class="block">Setter for <a href="#connection"><code>connection</code></a>: Database connection.</div>
</td>
</tr>
<tr id="i57" class="rowColor">
<td class="colFirst"><code><a href="SqlGraphStore.html" title="class in nzilbb.labbcat.server.db">SqlGraphStore</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setDisconnectWhenFinished(boolean)">setDisconnectWhenFinished</a></span>&#8203;(boolean&nbsp;newDisconnectWhenFinished)</code></th>
<td class="colLast">
<div class="block">Setter for <a href="#disconnectWhenFinished"><code>disconnectWhenFinished</code></a>: Whether to disconnect the connection
 when garbage collected.</div>
</td>
</tr>
<tr id="i58" class="altColor">
<td class="colFirst"><code><a href="SqlGraphStore.html" title="class in nzilbb.labbcat.server.db">SqlGraphStore</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setFiles(java.io.File)">setFiles</a></span>&#8203;(File&nbsp;newFiles)</code></th>
<td class="colLast">
<div class="block">Setter for <a href="#files"><code>files</code></a>: Root directory for file structure.</div>
</td>
</tr>
<tr id="i59" class="rowColor">
<td class="colFirst"><code><a href="SqlGraphStore.html" title="class in nzilbb.labbcat.server.db">SqlGraphStore</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setId(java.lang.String)">setId</a></span>&#8203;(String&nbsp;newId)</code></th>
<td class="colLast">
<div class="block">Setter for <a href="#id"><code>id</code></a>: The store's ID.</div>
</td>
</tr>
<tr id="i60" class="altColor">
<td class="colFirst"><code><a href="SqlGraphStore.html" title="class in nzilbb.labbcat.server.db">SqlGraphStore</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setUser(java.lang.String)">setUser</a></span>&#8203;(String&nbsp;newUser)</code></th>
<td class="colLast">
<div class="block">Setter for <a href="#user"><code>user</code></a>: ID of the user querying the store.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.IGraphStoreQuery">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;IGraphStoreQuery</h3>
<code>getMatchingAnnotations, getMatchingGraphIds, getMatchingGraphIds</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SqlGraphStore</h4>
<pre>public&nbsp;SqlGraphStore()</pre>
<div class="block">Default constructor.</div>
</li>
</ul>
<a id="&lt;init&gt;(java.lang.String,java.sql.Connection,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SqlGraphStore</h4>
<pre>public&nbsp;SqlGraphStore&#8203;(String&nbsp;baseUrl,
                     Connection&nbsp;connection,
                     String&nbsp;user)
              throws SQLException</pre>
<div class="block">Constructor with connection.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>baseUrl</code> - URL prefix for file access.</dd>
<dd><code>connection</code> - An opened database connection.</dd>
<dd><code>user</code> - ID of the user</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>SQLException</code></dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(java.lang.String,java.io.File,java.sql.Connection,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SqlGraphStore</h4>
<pre>public&nbsp;SqlGraphStore&#8203;(String&nbsp;baseUrl,
                     File&nbsp;files,
                     Connection&nbsp;connection,
                     String&nbsp;user)</pre>
<div class="block">Constructor with connection.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>baseUrl</code> - URL prefix for file access.</dd>
<dd><code>files</code> - Root directory for file structure.</dd>
<dd><code>connection</code> - An opened database connection.</dd>
<dd><code>user</code> - ID of the user</dd>
</dl>
</li>
</ul>
<a id="&lt;init&gt;(java.lang.String,java.io.File,java.lang.String,java.lang.String,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SqlGraphStore</h4>
<pre>public&nbsp;SqlGraphStore&#8203;(String&nbsp;baseUrl,
                     File&nbsp;files,
                     String&nbsp;connectString,
                     String&nbsp;databaseUser,
                     String&nbsp;password,
                     String&nbsp;storeUser)
              throws SQLException</pre>
<div class="block">Constructor with connection parameters.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>baseUrl</code> - URL prefix for file access.</dd>
<dd><code>files</code> - Root directory for file structure.</dd>
<dd><code>connectString</code> - The database connection string.</dd>
<dd><code>databaseUser</code> - The database username.</dd>
<dd><code>password</code> - The databa password.</dd>
<dd><code>storeUser</code> - ID of the user</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>SQLException</code> - If an error occurs during connection.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="getBaseUrl()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBaseUrl</h4>
<pre class="methodSignature">public&nbsp;String&nbsp;getBaseUrl()</pre>
<div class="block">Getter for <a href="#baseUrl"><code>baseUrl</code></a>: URL prefix for file access.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>URL prefix for file access.</dd>
</dl>
</li>
</ul>
<a id="setBaseUrl(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBaseUrl</h4>
<pre class="methodSignature">public&nbsp;<a href="SqlGraphStore.html" title="class in nzilbb.labbcat.server.db">SqlGraphStore</a>&nbsp;setBaseUrl&#8203;(String&nbsp;newBaseUrl)</pre>
<div class="block">Setter for <a href="#baseUrl"><code>baseUrl</code></a>: URL prefix for file access.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newBaseUrl</code> - URL prefix for file access.</dd>
</dl>
</li>
</ul>
<a id="getFiles()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFiles</h4>
<pre class="methodSignature">public&nbsp;File&nbsp;getFiles()</pre>
<div class="block">Getter for <a href="#files"><code>files</code></a>: Root directory for file structure.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Root directory for file structure.</dd>
</dl>
</li>
</ul>
<a id="setFiles(java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFiles</h4>
<pre class="methodSignature">public&nbsp;<a href="SqlGraphStore.html" title="class in nzilbb.labbcat.server.db">SqlGraphStore</a>&nbsp;setFiles&#8203;(File&nbsp;newFiles)</pre>
<div class="block">Setter for <a href="#files"><code>files</code></a>: Root directory for file structure.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newFiles</code> - Root directory for file structure.</dd>
</dl>
</li>
</ul>
<a id="getConnection()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConnection</h4>
<pre class="methodSignature">public&nbsp;Connection&nbsp;getConnection()</pre>
<div class="block">Getter for <a href="#connection"><code>connection</code></a>: Database connection.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Database connection.</dd>
</dl>
</li>
</ul>
<a id="setConnection(java.sql.Connection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setConnection</h4>
<pre class="methodSignature">public&nbsp;<a href="SqlGraphStore.html" title="class in nzilbb.labbcat.server.db">SqlGraphStore</a>&nbsp;setConnection&#8203;(Connection&nbsp;newConnection)</pre>
<div class="block">Setter for <a href="#connection"><code>connection</code></a>: Database connection.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newConnection</code> - Database connection.</dd>
</dl>
</li>
</ul>
<a id="getDisconnectWhenFinished()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDisconnectWhenFinished</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;getDisconnectWhenFinished()</pre>
<div class="block">Getter for <a href="#disconnectWhenFinished"><code>disconnectWhenFinished</code></a>: Whether to disconnect the connection
 when garbage collected.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Whether to disconnect the connection when garbage collected.</dd>
</dl>
</li>
</ul>
<a id="setDisconnectWhenFinished(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDisconnectWhenFinished</h4>
<pre class="methodSignature">public&nbsp;<a href="SqlGraphStore.html" title="class in nzilbb.labbcat.server.db">SqlGraphStore</a>&nbsp;setDisconnectWhenFinished&#8203;(boolean&nbsp;newDisconnectWhenFinished)</pre>
<div class="block">Setter for <a href="#disconnectWhenFinished"><code>disconnectWhenFinished</code></a>: Whether to disconnect the connection
 when garbage collected.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newDisconnectWhenFinished</code> - Whether to disconnect the connection when garbage collected.</dd>
</dl>
</li>
</ul>
<a id="getId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getId</h4>
<pre class="methodSignature">public&nbsp;String&nbsp;getId()
             throws StoreException,
                    PermissionException</pre>
<div class="block">IGraphStore method and getter for <a href="#id"><code>id</code></a>: The store's ID.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getId</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The store's ID.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="setId(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setId</h4>
<pre class="methodSignature">public&nbsp;<a href="SqlGraphStore.html" title="class in nzilbb.labbcat.server.db">SqlGraphStore</a>&nbsp;setId&#8203;(String&nbsp;newId)</pre>
<div class="block">Setter for <a href="#id"><code>id</code></a>: The store's ID.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newId</code> - The store's ID.</dd>
</dl>
</li>
</ul>
<a id="getUser()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUser</h4>
<pre class="methodSignature">public&nbsp;String&nbsp;getUser()</pre>
<div class="block">Getter for <a href="#user"><code>user</code></a>: ID of the user querying the store.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>ID of the user querying the store.</dd>
</dl>
</li>
</ul>
<a id="setUser(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setUser</h4>
<pre class="methodSignature">public&nbsp;<a href="SqlGraphStore.html" title="class in nzilbb.labbcat.server.db">SqlGraphStore</a>&nbsp;setUser&#8203;(String&nbsp;newUser)</pre>
<div class="block">Setter for <a href="#user"><code>user</code></a>: ID of the user querying the store.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>newUser</code> - ID of the user querying the store.</dd>
</dl>
</li>
</ul>
<a id="getUserRoles()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUserRoles</h4>
<pre class="methodSignature">public&nbsp;HashSet&lt;String&gt;&nbsp;getUserRoles()</pre>
<div class="block">Getter for <a href="#userRoles"><code>userRoles</code></a>: Roles the user fulfills.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Roles the user fulfills.</dd>
</dl>
</li>
</ul>
<a id="finalize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalize</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;finalize()</pre>
<div class="block">Called when the object is garbage-collected.</div>
</li>
</ul>
<a id="getLayerIds()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLayerIds</h4>
<pre class="methodSignature">public&nbsp;String[]&nbsp;getLayerIds()
                     throws StoreException,
                            PermissionException</pre>
<div class="block">Gets a list of layer IDs (annotation 'types').</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getLayerIds</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of layer IDs.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getLayers()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLayers</h4>
<pre class="methodSignature">public&nbsp;Layer[]&nbsp;getLayers()
                  throws StoreException,
                         PermissionException</pre>
<div class="block">Gets a list of layer definitions.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getLayers</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of layer definitions.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getSchema()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSchema</h4>
<pre class="methodSignature">public&nbsp;Schema&nbsp;getSchema()
                 throws StoreException,
                        PermissionException</pre>
<div class="block">Gets the layer schema. For performance reasons, this implementation only retrieves/builds
 the schema once, and always returns a clone of that original object.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getSchema</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A schema defining the layers and how they relate to each other.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getLayer(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLayer</h4>
<pre class="methodSignature">public&nbsp;Layer&nbsp;getLayer&#8203;(String&nbsp;id)
               throws StoreException,
                      PermissionException</pre>
<div class="block">Gets a layer definition.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getLayer</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - ID of the layer to get the definition for.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The definition of the given layer.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getCorpusIds()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCorpusIds</h4>
<pre class="methodSignature">public&nbsp;String[]&nbsp;getCorpusIds()
                      throws StoreException,
                             PermissionException</pre>
<div class="block">Gets a list of corpus IDs.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getCorpusIds</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of corpus IDs.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getParticipantIds()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getParticipantIds</h4>
<pre class="methodSignature">public&nbsp;String[]&nbsp;getParticipantIds()
                           throws StoreException,
                                  PermissionException</pre>
<div class="block">Gets a list of participant IDs.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getParticipantIds</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of participant IDs.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getParticipant(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getParticipant</h4>
<pre class="methodSignature">public&nbsp;Annotation&nbsp;getParticipant&#8203;(String&nbsp;id)
                          throws StoreException,
                                 PermissionException</pre>
<div class="block">Gets the participant record specified by the given identifier.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getParticipant</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The ID of the participant, which could be their name or their database
 annotation ID.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An annotation representing the participant, or null if the participant was not found.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code></dd>
<dd><code>PermissionException</code></dd>
</dl>
</li>
</ul>
<a id="saveParticipant(nzilbb.ag.Annotation)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveParticipant</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;saveParticipant&#8203;(Annotation&nbsp;participant)
                        throws StoreException,
                               PermissionException</pre>
<div class="block">Saves a participant, and all its tags, to the database.  The participant is
 represented by an Annotation that isn't assumed to be part of a graph.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>saveParticipant</code>&nbsp;in interface&nbsp;<code>IGraphStore</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>participant</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if changes were saved, false if there were no changes to save.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error prevents the participant from being saved.</dd>
<dd><code>PermissionException</code> - If saving the participant is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getGraphIds()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGraphIds</h4>
<pre class="methodSignature">public&nbsp;String[]&nbsp;getGraphIds()
                     throws StoreException,
                            PermissionException</pre>
<div class="block">Gets a list of graph IDs.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getGraphIds</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of graph IDs.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getGraphIdsInCorpus(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGraphIdsInCorpus</h4>
<pre class="methodSignature">public&nbsp;String[]&nbsp;getGraphIdsInCorpus&#8203;(String&nbsp;id)
                             throws StoreException,
                                    PermissionException</pre>
<div class="block">Gets a list of graph IDs in the given corpus.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getGraphIdsInCorpus</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - A corpus ID.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of graph IDs.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getGraphIdsWithParticipant(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGraphIdsWithParticipant</h4>
<pre class="methodSignature">public&nbsp;String[]&nbsp;getGraphIdsWithParticipant&#8203;(String&nbsp;id)
                                    throws StoreException,
                                           PermissionException</pre>
<div class="block">Gets a list of IDs of graphs that include the given participant.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getGraphIdsWithParticipant</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - A participant ID.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of graph IDs.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="countMatchingParticipantIds(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>countMatchingParticipantIds</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;countMatchingParticipantIds&#8203;(String&nbsp;expression)
                                throws StoreException,
                                       PermissionException</pre>
<div class="block">Counts the number of participants that match a particular pattern.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>countMatchingParticipantIds</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>expression</code> - An expression that determines which participants match.
 <p> The expression language is currently not well defined, but expressions such as the
 following can be used: 
 <ul>
  <li><code>id MATCHES 'Ada.+'</code></li>
  <li><code>'CC' IN labels('corpus')</code></li>
  <li><code>'en' IN labels('participant_languages')</code></li>
  <li><code>'en' IN labels('transcript_language')</code></li>
  <li><code>id NOT MATCHES 'Ada.+' AND my('corpus').label = 'CC'</code></li>
  <li><code>list('transcript_rating').length &gt; 2</code></li>
  <li><code>list('participant_rating').length = 0</code></li>
  <li><code>'labbcat' NOT IN annotators('transcript_rating')</code></li>
  <li><code>my('participant_gender').label = 'NA'</code></li>
 </ul></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of matching participants.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getMatchingParticipantIds(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMatchingParticipantIds</h4>
<pre class="methodSignature">public&nbsp;String[]&nbsp;getMatchingParticipantIds&#8203;(String&nbsp;expression)
                                   throws StoreException,
                                          PermissionException</pre>
<div class="block">Gets a list of IDs of participants that match a particular pattern.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getMatchingParticipantIds</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>expression</code> - An expression that determines which participants match.
 <p> The expression language is currently not well defined, but expressions such as the
 following can be used: 
 <ul>
  <li><code>id MATCHES 'Ada.+'</code></li>
  <li><code>'CC' IN labels('corpus')</code></li>
  <li><code>'en' IN labels('participant_languages')</code></li>
  <li><code>'en' IN labels('transcript_language')</code></li>
  <li><code>id NOT MATCHES 'Ada.+' AND my('corpus').label = 'CC'</code></li>
  <li><code>list('transcript_rating').length &gt; 2</code></li>
  <li><code>list('participant_rating').length = 0</code></li>
  <li><code>'labbcat' NOT IN annotators('transcript_rating')</code></li>
  <li><code>my('participant_gender').label = 'NA'</code></li>
 </ul></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of participant IDs.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getMatchingParticipantIds(java.lang.String,java.lang.Integer,java.lang.Integer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMatchingParticipantIds</h4>
<pre class="methodSignature">public&nbsp;String[]&nbsp;getMatchingParticipantIds&#8203;(String&nbsp;expression,
                                          Integer&nbsp;pageLength,
                                          Integer&nbsp;pageNumber)
                                   throws StoreException,
                                          PermissionException</pre>
<div class="block">Gets a list of IDs of participants that match a particular pattern.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getMatchingParticipantIds</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>expression</code> - An expression that determines which participants match.
 <p> The expression language is currently not well defined, but expressions such as the
 following can be used: 
 <ul>
  <li><code>id MATCHES 'Ada.+'</code></li>
  <li><code>'CC' IN labels('corpus')</code></li>
  <li><code>'en' IN labels('participant_languages')</code></li>
  <li><code>'en' IN labels('transcript_language')</code></li>
  <li><code>id NOT MATCHES 'Ada.+' AND my('corpus').label = 'CC'</code></li>
  <li><code>list('transcript_rating').length &gt; 2</code></li>
  <li><code>list('participant_rating').length = 0</code></li>
  <li><code>'labbcat' NOT IN annotators('transcript_rating')</code></li>
  <li><code>my('participant_gender').label = 'NA'</code></li>
 </ul></dd>
<dd><code>pageLength</code> - The maximum number of IDs to return, or null to return all.</dd>
<dd><code>pageNumber</code> - The page number to return, or null to return the first page.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of participant IDs.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="countMatchingGraphIds(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>countMatchingGraphIds</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;countMatchingGraphIds&#8203;(String&nbsp;expression)
                          throws StoreException,
                                 PermissionException</pre>
<div class="block">Counts the number of graphs that match a particular pattern.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>countMatchingGraphIds</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>expression</code> - An expression that determines which graphs match.
 <p> The expression language is currently not well defined, but expressions such as
 the following can be used:
 <ul>
  <li><code>id MATCHES 'Ada.+'</code></li>
  <li><code>'Robert' IN labels('who')</code></li>
  <li><code>my('corpus').label IN ('CC', 'IA', 'MU')</code></li>
  <li><code>my('episode').label = 'Ada Aitcheson'</code></li>
  <li><code>my('transcript_scribe').label = 'Robert'</code></li>
  <li><code>my('participant_languages').label = 'en'</code></li>
  <li><code>my('noise').label = 'bell'</code></li>
  <li><code>'en' IN labels('transcript_languages')</code></li>
  <li><code>'en' IN labels('participant_languages')</code></li>
  <li><code>'bell' IN labels('noise')</code></li>
  <li><code>list('transcript_languages').length gt; 1</code></li>
  <li><code>list('participant_languages').length gt; 1</code></li>
  <li><code>list('transcript').length gt; 100</code></li>
  <li><code>'Robert' IN annotators('transcript_rating')</code></li>
  <li><code>id NOT MATCHES 'Ada.+' AND my('corpus').label = 'CC' AND 'Robert' IN
 labels('who')</code></li>
 </ul></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of matching graphs.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getMatchingGraphIds(java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMatchingGraphIds</h4>
<pre class="methodSignature">public&nbsp;String[]&nbsp;getMatchingGraphIds&#8203;(String&nbsp;expression,
                                    Integer&nbsp;pageLength,
                                    Integer&nbsp;pageNumber,
                                    String&nbsp;order)
                             throws StoreException,
                                    PermissionException</pre>
<div class="block">Gets a list of IDs of graphs that match a particular pattern.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getMatchingGraphIds</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>expression</code> - An expression that determines which graphs match.
 <p> The expression language is currently not well defined, but expressions such as
 the following can be used:
 <ul>
  <li><code>id MATCHES 'Ada.+'</code></li>
  <li><code>'Robert' IN labels('who')</code></li>
  <li><code>my('corpus').label IN ('CC', 'IA', 'MU')</code></li>
  <li><code>my('episode').label = 'Ada Aitcheson'</code></li>
  <li><code>my('transcript_scribe').label = 'Robert'</code></li>
  <li><code>my('participant_languages').label = 'en'</code></li>
  <li><code>my('noise').label = 'bell'</code></li>
  <li><code>'en' IN labels('transcript_languages')</code></li>
  <li><code>'en' IN labels('participant_languages')</code></li>
  <li><code>'bell' IN labels('noise')</code></li>
  <li><code>list('transcript_languages').length gt; 1</code></li>
  <li><code>list('participant_languages').length gt; 1</code></li>
  <li><code>list('transcript').length gt; 100</code></li>
  <li><code>'Robert' IN annotators('transcript_rating')</code></li>
  <li><code>id NOT MATCHES 'Ada.+' AND my('corpus').label = 'CC' AND 'Robert' IN
 labels('who')</code></li>
 </ul></dd>
<dd><code>pageLength</code> - The maximum number of IDs to return, or null to return all.</dd>
<dd><code>pageNumber</code> - The zero-based page number to return, or null to return the first page.</dd>
<dd><code>order</code> - The ordering for the list of IDs, a string containing a comma-separated
 list of epxressions, which may be appended by " ASC" or " DESC", or null for graph
 ID order.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of graph IDs.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getGraph(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGraph</h4>
<pre class="methodSignature">public&nbsp;Graph&nbsp;getGraph&#8203;(String&nbsp;id)
               throws StoreException,
                      PermissionException,
                      GraphNotFoundException</pre>
<div class="block">Gets a graph given its ID.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getGraph</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The given graph ID.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The identified graph.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph was not found in the store.</dd>
</dl>
</li>
</ul>
<a id="getGraph(java.lang.String,java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGraph</h4>
<pre class="methodSignature">public&nbsp;Graph&nbsp;getGraph&#8203;(String&nbsp;id,
                      String[]&nbsp;layerIds)
               throws StoreException,
                      PermissionException,
                      GraphNotFoundException</pre>
<div class="block">Gets a graph given its ID, containing only the given layers.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getGraph</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The given graph ID.</dd>
<dd><code>layerIds</code> - The IDs of the layers to load, or null if only graph data is required.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The identified graph.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph was not found in the store.</dd>
</dl>
</li>
</ul>
<a id="getFragment(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFragment</h4>
<pre class="methodSignature">public&nbsp;Graph&nbsp;getFragment&#8203;(String&nbsp;graphId,
                         String&nbsp;annotationId)
                  throws StoreException,
                         PermissionException,
                         GraphNotFoundException</pre>
<div class="block">Gets a fragment of a graph, given its ID and the ID of an annotation in it that defines the 
 desired fragment.
 <p>The given annotation defines both the start and end anchors of the fragment, and also 
 which annotations on descendant layers will be included. 
 So the resulting fragment will include:
 <ul>
  <li>the given defining annotation</li>
  <li>its parent annotation, and all ancestors, but their anchors are included only if the 
      defining annotation t-includes the ancestor</li>
  <li>all descendants of the defining annotation or any of its ancestors, 
      which are t-included by the defining annotation (but not annotations
      that the defining annotation t-includes but which aren't directly related,
      so in the case of simultaneous speech, only the words of the speaker of the defining
      utterance will be included, not words spoken by other speakers.
      </li>
 </ul></div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getFragment</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>graphId</code> - The ID of the graph.</dd>
<dd><code>annotationId</code> - The ID of an annotation that defines the bounds of the fragment.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The identified graph fragment.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph was not found in the store.</dd>
</dl>
</li>
</ul>
<a id="countAnnotations(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>countAnnotations</h4>
<pre class="methodSignature">public&nbsp;long&nbsp;countAnnotations&#8203;(String&nbsp;id,
                             String&nbsp;layerId)
                      throws StoreException,
                             PermissionException,
                             GraphNotFoundException</pre>
<div class="block">Gets the number of annotations on the given layer of the given graph.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>countAnnotations</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The ID of the graph.</dd>
<dd><code>layerId</code> - The ID of the layer.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A (possibly empty) array of annotations.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph was not found in the store.</dd>
</dl>
</li>
</ul>
<a id="getAnnotations(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAnnotations</h4>
<pre class="methodSignature">public&nbsp;Annotation[]&nbsp;getAnnotations&#8203;(String&nbsp;id,
                                   String&nbsp;layerId)
                            throws StoreException,
                                   PermissionException,
                                   GraphNotFoundException</pre>
<div class="block">Gets the annotations on the given layer of the given graph.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getAnnotations</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The ID of the graph.</dd>
<dd><code>layerId</code> - The ID of the layer.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A (possibly empty) array of annotations.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph was not found in the store.</dd>
</dl>
</li>
</ul>
<a id="getAnnotations(java.lang.String,java.lang.String,java.lang.Integer,java.lang.Integer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAnnotations</h4>
<pre class="methodSignature">public&nbsp;Annotation[]&nbsp;getAnnotations&#8203;(String&nbsp;id,
                                   String&nbsp;layerId,
                                   Integer&nbsp;pageLength,
                                   Integer&nbsp;pageNumber)
                            throws StoreException,
                                   PermissionException,
                                   GraphNotFoundException</pre>
<div class="block">Gets the annotations on the given layer of the given graph.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getAnnotations</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The ID of the graph.</dd>
<dd><code>layerId</code> - The ID of the layer.</dd>
<dd><code>pageLength</code> - The maximum number of IDs to return, or null to return all.</dd>
<dd><code>pageNumber</code> - The page number to return, or null to return the first page.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A (possibly empty) array of annotations.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph was not found in the store.</dd>
</dl>
</li>
</ul>
<a id="countMatchingAnnotations(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>countMatchingAnnotations</h4>
<pre class="methodSignature">public&nbsp;int&nbsp;countMatchingAnnotations&#8203;(String&nbsp;expression)
                             throws StoreException,
                                    PermissionException</pre>
<div class="block">Counts the number of annotations that match a particular pattern.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>countMatchingAnnotations</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>expression</code> - An expression that determines which participants match.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The number of matching annotations.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getMatchingAnnotations(java.lang.String,java.lang.Integer,java.lang.Integer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMatchingAnnotations</h4>
<pre class="methodSignature">public&nbsp;Annotation[]&nbsp;getMatchingAnnotations&#8203;(String&nbsp;expression,
                                           Integer&nbsp;pageLength,
                                           Integer&nbsp;pageNumber)
                                    throws StoreException,
                                           PermissionException</pre>
<div class="block">Gets a list of annotations that match a particular pattern.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getMatchingAnnotations</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>expression</code> - An expression that determines which graphs match.</dd>
<dd><code>pageLength</code> - The maximum number of annotations to return, or null to return all.</dd>
<dd><code>pageNumber</code> - The page number to return, or null to return the first page.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A list of matching <code>Annotation</code>s.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getMatchAnnotations(java.util.Iterator,java.lang.String[],int,int,java.util.function.Consumer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMatchAnnotations</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;getMatchAnnotations&#8203;(Iterator&lt;String&gt;&nbsp;matchIds,
                                String[]&nbsp;layerIds,
                                int&nbsp;targetOffset,
                                int&nbsp;annotationsPerLayer,
                                Consumer&lt;Annotation[]&gt;&nbsp;consumer)
                         throws StoreException,
                                PermissionException</pre>
<div class="block">Gets the annotations on given layers for a set of match IDs.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getMatchAnnotations</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>matchIds</code> - An iterator that supplies match IDs - these may be the contents of
 the MatchId column in exported search results, token URLs, or annotation IDs.</dd>
<dd><code>layerIds</code> - The layer IDs of the layers to get.</dd>
<dd><code>targetOffset</code> - Which token to get the annotations of; 0 means the match target
 itself, 1 means the token after the target, -1 means the token before the target, etc.</dd>
<dd><code>annotationsPerLayer</code> - The number of annotations per layer to get; if there's a
 smaller number of annotations available, the unfilled array elements will be null.</dd>
<dd><code>consumer</code> - A consumer for handling the resulting
 annotations. Consumer.accept() will be invoked once for each element returned by the
 <var>matchIds</var> iterator, with an array of <code>Annotation</code> objects. The size
 of this array will be <var>layerIds.length</var> * <var>annotationsPerLayer</var>,
 and will be filled in with the available annotations for each layer; when
 annotations are not available, null is supplied.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getAnchors(java.lang.String,java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAnchors</h4>
<pre class="methodSignature">public&nbsp;Anchor[]&nbsp;getAnchors&#8203;(String&nbsp;id,
                           String[]&nbsp;anchorIds)
                    throws StoreException,
                           PermissionException,
                           GraphNotFoundException</pre>
<div class="block">Gets the given anchors in the given graph.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getAnchors</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The ID of the graph.</dd>
<dd><code>anchorIds</code> - An array of anchor IDs.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A (possibly empty) array of anchors.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph was not found in the store.</dd>
</dl>
</li>
</ul>
<a id="getFragment(java.lang.String,java.lang.String,java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFragment</h4>
<pre class="methodSignature">public&nbsp;Graph&nbsp;getFragment&#8203;(String&nbsp;graphId,
                         String&nbsp;annotationId,
                         String[]&nbsp;layerIds)
                  throws StoreException,
                         PermissionException,
                         GraphNotFoundException</pre>
<div class="block">Gets a fragment of a graph, given its ID and the ID of an annotation in it that defines the 
 desired fragment, and containing only the given layers.
 <p>The given annotation defines both the start and end anchors of the fragment, and also 
 which annotations on descendant layers will be included. 
 So the resulting fragment will include:
 <ul>
  <li>the given defining annotation</li>
  <li>its parent annotation, and all ancestors, but their anchors are included only if the 
      defining annotation t-includes the ancestor</li>
  <li>all descendants of the defining annotation or any of its ancestors, in the given
      layers, which are t-included by the defining annotation (but not annotations from
      those layers that the defining annotation t-includes but which aren't directly related,
      so in the case of simultaneous speech, only the words of the speaker of the defining
      utterance will be included, not words spoken by other speakers.
      </li>
 </ul>
 All annotations included in the fragment also have their <code>Layer</code> definition appear in 
 graph's <code>Schema</code>, whether or not they're mentioned in the <var>layerId</var> list.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getFragment</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>graphId</code> - The ID of the graph.</dd>
<dd><code>annotationId</code> - The ID of an annotation that defines the bounds of the fragment.</dd>
<dd><code>layerIds</code> - The IDs of the layers to load, or null if only graph data is required.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The identified graph fragment.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph was not found in the store.</dd>
</dl>
</li>
</ul>
<a id="getFragment(java.lang.String,double,double,java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFragment</h4>
<pre class="methodSignature">public&nbsp;Graph&nbsp;getFragment&#8203;(String&nbsp;graphId,
                         double&nbsp;start,
                         double&nbsp;end,
                         String[]&nbsp;layerIds)
                  throws StoreException,
                         PermissionException,
                         GraphNotFoundException</pre>
<div class="block">Gets a fragment of a graph, given its ID and the start/end offsets that define the 
 desired fragment, and containing only the given layers.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getFragment</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>graphId</code> - The ID of the graph.</dd>
<dd><code>start</code> - The start offset of the fragment.</dd>
<dd><code>end</code> - The end offset of the fragment.</dd>
<dd><code>layerIds</code> - The IDs of the layers to load, or null if only graph data is required.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The identified graph fragment.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph was not found in the store.</dd>
</dl>
</li>
</ul>
<a id="getFragmentSeries(java.lang.String,java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFragmentSeries</h4>
<pre class="methodSignature">public&nbsp;MonitorableSeries&lt;Graph&gt;&nbsp;getFragmentSeries&#8203;(String&nbsp;seriesId,
                                                  String[]&nbsp;layerIds)
                                           throws StoreException,
                                                  PermissionException,
                                                  GraphNotFoundException</pre>
<div class="block">Gets a series of fragments, given the series' ID, and only the given layers.
 <p>This implementation expects <var>seriesId</var> to be a current <tt>result.search_id</tt>.
 <p>The fragments are created lazily as required, so this method should return quickly.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getFragmentSeries</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>seriesId</code> - The ID of the series.</dd>
<dd><code>layerIds</code> - The IDs of the layers to load, or null if only graph data is required.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An enumerable series of fragments.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the series identified by <var>seriesId</var> was not found in the store.</dd>
</dl>
</li>
</ul>
<a id="saveGraph(nzilbb.ag.Graph)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveGraph</h4>
<pre class="methodSignature">public&nbsp;boolean&nbsp;saveGraph&#8203;(Graph&nbsp;graph)
                  throws StoreException,
                         PermissionException,
                         GraphNotFoundException</pre>
<div class="block">Saves the given graph. The graph can be partial e.g. include only some of the layers
 that the stored version of the graph contains, or be a fragment.
 <p>The graph deltas are assumed to be set correctly, so if this is a new graph, then
 <code>Graph.getChange()</code> should return Change.Operation.Create, if it's an update,
 Change.Operation.Update, and to delete, Change.Operation.Delete.  Correspondingly,
 all <code>Anchor</code>s and <code>Annotation</code>s should have their changes set also.  If
 <code>Graph.getChanges()</code> returns no changes, no action will be taken, and this
 method returns false.
 <p>After this method has executed, <code>Graph.commit()</code> is <em>not</em> called -
 this must be done by the caller, if they want changes to be committed.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>saveGraph</code>&nbsp;in interface&nbsp;<code>IGraphStore</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>graph</code> - The graph to save.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if changes were saved, false if there were no changes to save.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph was not found in the store.</dd>
</dl>
</li>
</ul>
<a id="saveSpecialAnnotationChanges(nzilbb.ag.Annotation,java.util.HashMap)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveSpecialAnnotationChanges</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;saveSpecialAnnotationChanges&#8203;(Annotation&nbsp;annotation,
                                         HashMap&lt;String,&#8203;String&gt;&nbsp;participantNameToNumber)
                                  throws PermissionException,
                                         StoreException,
                                         SQLException</pre>
<div class="block">Save changes to a 'special' annotation, e.g. corpus, series, etc.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>annotation</code> - The annotation whose changes should be saved.</dd>
<dd><code>participantNameToNumber</code> - A map of participant names to speaker numbers.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>PermissionException</code> - If there's a permission problem.</dd>
<dd><code>SQLException</code> - If a database error occurs.</dd>
<dd><code>StoreException</code> - If some other error occurs.</dd>
</dl>
</li>
</ul>
<a id="saveEpisodeAnnotationChanges(nzilbb.ag.Annotation,java.sql.PreparedStatement)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveEpisodeAnnotationChanges</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;saveEpisodeAnnotationChanges&#8203;(Annotation&nbsp;annotation,
                                         PreparedStatement&nbsp;sqlLastId)
                                  throws PermissionException,
                                         StoreException,
                                         SQLException</pre>
<div class="block">Save changes to an episode tag annotation.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>annotation</code> - The annotation whose changes should be saved.</dd>
<dd><code>sqlLastId</code> - Prepared statement for retrieving the last database ID created.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>PermissionException</code> - If there's a permission problem.</dd>
<dd><code>SQLException</code> - If a database error occurs.</dd>
<dd><code>StoreException</code> - If some other error occurs.</dd>
</dl>
</li>
</ul>
<a id="saveTranscriptAttributeChanges(nzilbb.ag.Annotation,java.sql.PreparedStatement,java.sql.PreparedStatement,java.sql.PreparedStatement)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveTranscriptAttributeChanges</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;saveTranscriptAttributeChanges&#8203;(Annotation&nbsp;annotation,
                                           PreparedStatement&nbsp;sqlInsertTranscriptAttribute,
                                           PreparedStatement&nbsp;sqlUpdateTranscriptAttribute,
                                           PreparedStatement&nbsp;sqlDeleteTranscriptAttribute)
                                    throws SQLException,
                                           StoreException</pre>
<div class="block">Saves changes to a transcript attribute annotation.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>annotation</code> - The annotation whose changes should be saved.</dd>
<dd><code>sqlInsertTranscriptAttribute</code> - Prepared statement for inserting an attribute value.</dd>
<dd><code>sqlUpdateTranscriptAttribute</code> - Prepared statement for updating an attribute value.</dd>
<dd><code>sqlDeleteTranscriptAttribute</code> - Prepared statement for deleting an attribute value.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an ID cannot be parsed.</dd>
<dd><code>SQLException</code> - If a database error occurs.</dd>
</dl>
</li>
</ul>
<a id="saveParticipantAttributeChanges(nzilbb.ag.Annotation,java.sql.PreparedStatement,java.sql.PreparedStatement,java.sql.PreparedStatement,java.sql.PreparedStatement)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveParticipantAttributeChanges</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;saveParticipantAttributeChanges&#8203;(Annotation&nbsp;annotation,
                                            PreparedStatement&nbsp;sqlInsertParticipantAttribute,
                                            PreparedStatement&nbsp;sqlUpdateParticipantAttribute,
                                            PreparedStatement&nbsp;sqlDeleteParticipantAttribute,
                                            PreparedStatement&nbsp;sqlDeleteAllParticipantAttributesOnLayer)
                                     throws SQLException,
                                            StoreException,
                                            PermissionException</pre>
<div class="block">Saves changes to a transcript attribute annotation.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>annotation</code> - The annotation whose changes should be saved.</dd>
<dd><code>sqlInsertParticipantAttribute</code> - Prepared statement for inserting an attribute value.</dd>
<dd><code>sqlUpdateParticipantAttribute</code> - Prepared statement for updating an attribute value.</dd>
<dd><code>sqlDeleteParticipantAttribute</code> - Prepared statement for deleting an attribute value.</dd>
<dd><code>sqlDeleteAllParticipantAttributesOnLayer</code> - Prepared statement for deleting all attribute values on a given layer.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an ID can't be parsed.</dd>
<dd><code>SQLException</code> - If a database error occurs.</dd>
<dd><code>PermissionException</code></dd>
</dl>
</li>
</ul>
<a id="createAnnotation(java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.Integer,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createAnnotation</h4>
<pre class="methodSignature">public&nbsp;String&nbsp;createAnnotation&#8203;(String&nbsp;id,
                               String&nbsp;fromId,
                               String&nbsp;toId,
                               String&nbsp;layerId,
                               String&nbsp;label,
                               Integer&nbsp;confidence,
                               String&nbsp;parentId)
                        throws StoreException,
                               PermissionException,
                               GraphNotFoundException</pre>
<div class="block">Creates an annotation starting at <var>fromId</var> and ending at <var>toId</var>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>createAnnotation</code>&nbsp;in interface&nbsp;<code>IGraphStore</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>fromId</code> - The start anchor's ID, which can be null if the layer is a tag layer.</dd>
<dd><code>toId</code> - The end anchor's ID, which can be null if the layer is a tag layer.</dd>
<dd><code>layerId</code> - The layer ID of the resulting annotation.</dd>
<dd><code>label</code> - The label of the resulting annotation.</dd>
<dd><code>confidence</code> - The confidence rating.</dd>
<dd><code>parentId</code> - The new annotation's parent's ID.</dd>
<dd><code>id</code> - The ID of the graph.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The ID of the new annotation.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code></dd>
<dd><code>PermissionException</code></dd>
<dd><code>GraphNotFoundException</code></dd>
</dl>
</li>
</ul>
<a id="destroyAnnotation(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>destroyAnnotation</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;destroyAnnotation&#8203;(String&nbsp;id,
                              String&nbsp;annotationId)
                       throws StoreException,
                              PermissionException,
                              GraphNotFoundException</pre>
<div class="block">Destroys the annotation with the given ID.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>destroyAnnotation</code>&nbsp;in interface&nbsp;<code>IGraphStore</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The ID of the graph.</dd>
<dd><code>annotationId</code> - The annotation's ID.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code></dd>
<dd><code>PermissionException</code></dd>
<dd><code>GraphNotFoundException</code></dd>
</dl>
</li>
</ul>
<a id="getMediaTracks()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMediaTracks</h4>
<pre class="methodSignature">public&nbsp;MediaTrackDefinition[]&nbsp;getMediaTracks()
                                      throws StoreException,
                                             PermissionException</pre>
<div class="block">List the predefined media tracks available for transcripts.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getMediaTracks</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An ordered list of media track definitions.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
</dl>
</li>
</ul>
<a id="getAvailableMedia(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAvailableMedia</h4>
<pre class="methodSignature">public&nbsp;MediaFile[]&nbsp;getAvailableMedia&#8203;(String&nbsp;id)
                              throws StoreException,
                                     PermissionException,
                                     GraphNotFoundException</pre>
<div class="block">List the media available for the given graph.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getAvailableMedia</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The graph ID.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>List of media files available for the given graph.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph was not found in the store.</dd>
</dl>
</li>
</ul>
<a id="getMedia(java.lang.String,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMedia</h4>
<pre class="methodSignature">public&nbsp;String&nbsp;getMedia&#8203;(String&nbsp;id,
                       String&nbsp;trackSuffix,
                       String&nbsp;mimeType)
                throws StoreException,
                       PermissionException,
                       GraphNotFoundException</pre>
<div class="block">Gets a given media track for a given graph.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getMedia</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The graph ID.</dd>
<dd><code>trackSuffix</code> - The track suffix of the media - see <code>MediaTrackDefinition.suffix</code>.</dd>
<dd><code>mimeType</code> - The MIME type of the media, which may include parameters for type
 conversion, e.g. "text/wav; samplerate=16000".</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A URL to the given media for the given graph, or null if the given media
 doesn't exist.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph was not found in the store.</dd>
</dl>
</li>
</ul>
<a id="getMedia(java.lang.String,java.lang.String,java.lang.String,java.lang.Double,java.lang.Double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMedia</h4>
<pre class="methodSignature">public&nbsp;String&nbsp;getMedia&#8203;(String&nbsp;id,
                       String&nbsp;trackSuffix,
                       String&nbsp;mimeType,
                       Double&nbsp;startOffset,
                       Double&nbsp;endOffset)
                throws StoreException,
                       PermissionException,
                       GraphNotFoundException</pre>
<div class="block">Gets a given media track for a given graph.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getMedia</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The graph ID.</dd>
<dd><code>trackSuffix</code> - The track suffix of the media - see <code>MediaTrackDefinition.suffix</code>.</dd>
<dd><code>mimeType</code> - The MIME type of the media, which may include parameters for type
 conversion, e.g. "text/wav; samplerate=16000"</dd>
<dd><code>startOffset</code> - The start offset of the media sample, or null for the start of the whole
 recording.</dd>
<dd><code>endOffset</code> - The end offset of the media sample, or null for the end of the
 whole recording.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A URL to the given media for the given graph, or null if the given media doesn't
 exist.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph was not found in the store.</dd>
</dl>
</li>
</ul>
<a id="saveMedia(java.lang.String,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveMedia</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;saveMedia&#8203;(String&nbsp;id,
                      String&nbsp;trackSuffix,
                      String&nbsp;mediaUrl)
               throws StoreException,
                      PermissionException,
                      GraphNotFoundException</pre>
<div class="block">Saves the given media for the given graph.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>saveMedia</code>&nbsp;in interface&nbsp;<code>IGraphStore</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The graph ID</dd>
<dd><code>trackSuffix</code> - The track suffix of the media - see <code>MediaTrackDefinition.suffix</code>.</dd>
<dd><code>mediaUrl</code> - A URL to the media content.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error prevents the media from being saved.</dd>
<dd><code>PermissionException</code> - If saving the media is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph doesn't exist.</dd>
</dl>
</li>
</ul>
<a id="saveSource(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveSource</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;saveSource&#8203;(String&nbsp;id,
                       String&nbsp;url)
                throws StoreException,
                       PermissionException,
                       GraphNotFoundException</pre>
<div class="block">Saves the given source file (transcript) for the given graph</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>saveSource</code>&nbsp;in interface&nbsp;<code>IGraphStore</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The graph ID</dd>
<dd><code>url</code> - A URL to the transcript.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error prevents the media from being saved.</dd>
<dd><code>PermissionException</code> - If saving the media is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph doesn't exist.</dd>
</dl>
</li>
</ul>
<a id="saveEpisodeDocument(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveEpisodeDocument</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;saveEpisodeDocument&#8203;(String&nbsp;id,
                                String&nbsp;url)
                         throws StoreException,
                                PermissionException,
                                GraphNotFoundException</pre>
<div class="block">Saves the given document for the episode of the given graph.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>saveEpisodeDocument</code>&nbsp;in interface&nbsp;<code>IGraphStore</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The graph ID</dd>
<dd><code>url</code> - A URL to the document.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error prevents the media from being saved.</dd>
<dd><code>PermissionException</code> - If saving the media is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph doesn't exist.</dd>
</dl>
</li>
</ul>
<a id="getEpisodeDocuments(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEpisodeDocuments</h4>
<pre class="methodSignature">public&nbsp;MediaFile[]&nbsp;getEpisodeDocuments&#8203;(String&nbsp;id)
                                throws StoreException,
                                       PermissionException,
                                       GraphNotFoundException</pre>
<div class="block">Get a list of documents associated with the episode of the given graph.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getEpisodeDocuments</code>&nbsp;in interface&nbsp;<code>IGraphStoreQuery</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The graph ID.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>List of document files/URLs.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error prevents the media from being saved.</dd>
<dd><code>PermissionException</code> - If saving the media is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph doesn't exist.</dd>
</dl>
</li>
</ul>
<a id="generateMissingMedia(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateMissingMedia</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;generateMissingMedia&#8203;(String&nbsp;id)
                          throws StoreException,
                                 PermissionException,
                                 GraphNotFoundException</pre>
<div class="block">Generates any media files that are not marked "on demand" and for which there are
 available conversions.
 <p>This implementation starts conversion processes, and returns immediately, so new
 files may not exist immediately after the method returns.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The graph ID.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error occurs.</dd>
<dd><code>PermissionException</code> - If the operation is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph was not found in the store.</dd>
</dl>
</li>
</ul>
<a id="deleteGraph(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteGraph</h4>
<pre class="methodSignature">public&nbsp;void&nbsp;deleteGraph&#8203;(String&nbsp;id)
                 throws StoreException,
                        PermissionException,
                        GraphNotFoundException</pre>
<div class="block">Deletes the given graph, and all associated files.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>deleteGraph</code>&nbsp;in interface&nbsp;<code>IGraphStore</code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - The ID graph to save.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>StoreException</code> - If an error prevents the graph from being saved.</dd>
<dd><code>PermissionException</code> - If saving the graph is not permitted.</dd>
<dd><code>GraphNotFoundException</code> - If the graph doesn't exist.</dd>
</dl>
</li>
</ul>
<a id="getSystemAttribute(java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getSystemAttribute</h4>
<pre class="methodSignature">public&nbsp;String&nbsp;getSystemAttribute&#8203;(String&nbsp;name)
                          throws SQLException</pre>
<div class="block">Gets the value of a system attribute.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - Attribute name.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The value of the system attribute, or null if there is no value.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>SQLException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small><i>&copy; NZILBB - January 29 2020</i></small></p>
</footer>
</body>
</html>
